# テンプレートで広がるTwiMLの世界

TwiMLについて調べ、着信メッセージに応答するために使用しましたが、TwiMLでできることは他にもあります。次のテキストでは、`<Message>`動詞の**to**属性とテンプレートの使用方法について習得します。

## 別の番号にメッセージを転送する

すべての着信メッセージを個人番号に転送したいとき、どうすればよいでしょう?`<Message>`動詞でTwiMLの`to`属性を使用し、Twilioがメッセージを渡す番号を指定できます。

`<Message>`動詞に`to`属性を追加するには、山括弧内に配置します。

```
<Message to="+16175551212">
```

## TwiML: Mustacheテンプレートを使用する

TwiMLを設定するとき、Mustacheテンプレートを使用すると、メッセージの実行時にメッセージを動的に(オンザフライで)更新できます。[Mustacheテンプレート](https://mustache.github.io/mustache.5.html)は、ハンドルバーの口ひげが横向きになっているように見える`{{...}}`中括弧にちなんで名付けられました。

Twilioがアプリケーション(この例ではTwiML Bin)にリクエストを送信すると、リクエスト内の情報の一部にアクセスできます。次の例をご覧ください。

```
<Response>
	<Message>{{From}} said "{{Body}}"</Message>
</Response>
```

Twilioが着信メッセージに応答する方法についてTwiMLの指示を調べると、`{{From}}`値は**from**の電話番号に置き換えられ、`{{Body}}`値は受信したメッセージの**body**に置き換えられます。

## すべてをまとめる

新しいTwiML Binを作成し、着信メッセージを自分の携帯電話番号に転送します。以下を使用する必要があります。

1. `<Message>`動詞と`to`属性
2. `Body`と`From`番号を取得するMustacheテンプレート(ヒント:  上記の例をご覧ください。)

[A Message Comes In]設定で、Twilio電話番号を新しいTwiML Binに忘れずに設定してください。

## テストする

Twilio番号にメッセージを送信するか、友達にTwilio番号にテキストを送信してもらいます。TwiMLを正しく記述した場合は、元の送信者からの本文と電話番号を示すテキストメッセージを自分の番号で受信するはずです。

この手順を確認したら、右側のインターフェイスに**Twilio**電話番号を入力し、[_HACK_]ボタンを押してポイントを獲得してください!